{"ast":null,"code":"var _jsxFileName = \"D:\\\\react\\\\app9-1\\\\local\\\\src\\\\db-delete.js\",\n  _s = $RefreshSig$();\n/* eslint-disable react-hooks/exhaustive-deps */\nimport React from 'react';\nimport './table-style.css';\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function DBUpdate() {\n  _s();\n  let [data, setData] = React.useState('');\n  const form = React.useRef();\n  React.useEffect(() => {\n    fetch('/api/db/read').then(response => response.json()).then(result => {\n      if (result.length > 0) {\n        showData(result);\n      } else {\n        setData( /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: \"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\"\n        }, void 0, false));\n      }\n    }).catch(err => alert(err));\n  }, []);\n  const showData = result => {\n    let r = /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: onSubmitForm,\n      ref: form,\n      children: [/*#__PURE__*/_jsxDEV(\"table\", {\n        children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\u0E25\\u0E1A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 27,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            class: \"thLeft\",\n            children: \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 27,\n            columnNumber: 24\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\u0E23\\u0E32\\u0E04\\u0E32\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 27,\n            columnNumber: 58\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 28,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            class: \"thLeft\",\n            children: \"\\u0E23\\u0E32\\u0E22\\u0E25\\u0E30\\u0E40\\u0E2D\\u0E35\\u0E22\\u0E14\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 28,\n            columnNumber: 39\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 9\n        }, this), result.map(doc => {\n          let dt = new Date(Date.parse(doc.date_added));\n          let dmy = /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [dt.getDate(), \"-\", dt.getMonth() + 1, \"-\", dt.getFullYear()]\n          }, void 0, true);\n          let p = new Intl.NumberFormat().format(doc.price);\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              class: \"tdCenter\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"_id\",\n                value: doc._id\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 40,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 39,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: doc.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 42,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              class: \"tdCenter\",\n              children: p\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 43,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              class: \"tdCenter\",\n              children: dmy\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 44,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: doc.detail\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 45,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 38,\n            columnNumber: 13\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        children: \"\\u0E25\\u0E1A\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E17\\u0E35\\u0E48\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 9\n    }, this);\n    setData(r);\n  };\n  const onSubmitForm = event => {\n    event.preventDefault();\n    const fd = new FormData(form.current);\n    const fe = Object.fromEntries(fd.entries());\n    if (Object.keys(fe).length === 0) {\n      alert('ต้องเลือกรายการที่จะลบ');\n      return;\n    }\n    if (!window.confirm('ยืนยันการลบรายการนี้')) {\n      return;\n    }\n    fetch('/api/db/delete', {\n      method: 'POST',\n      body: JSON.stringify(fe),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(response => response.json()).then(result => {\n      if (result.error) {\n        alert(result.error);\n      } else {\n        if (result.length === 0) {\n          setData('ไม่มีรายการข้อมูล');\n        } else {\n          showData(result);\n        }\n        alert('ข้อมูลถูกลบแล้ว');\n      }\n    }).catch(err => alert(err));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      margin: '20px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"data\",\n      children: data\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n      href: \"/db\",\n      children: \"\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E2B\\u0E25\\u0E31\\u0E01\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 9\n  }, this);\n}\n_s(DBUpdate, \"NSbrlBXSxJlcBMD1gKH11/arHeI=\");\n_c = DBUpdate;\nvar _c;\n$RefreshReg$(_c, \"DBUpdate\");","map":{"version":3,"names":["React","Fragment","_Fragment","jsxDEV","_jsxDEV","DBUpdate","_s","data","setData","useState","form","useRef","useEffect","fetch","then","response","json","result","length","showData","children","catch","err","alert","r","onSubmit","onSubmitForm","ref","fileName","_jsxFileName","lineNumber","columnNumber","class","map","doc","dt","Date","parse","date_added","dmy","getDate","getMonth","getFullYear","p","Intl","NumberFormat","format","price","type","name","value","_id","detail","event","preventDefault","fd","FormData","current","fe","Object","fromEntries","entries","keys","window","confirm","method","body","JSON","stringify","headers","error","style","margin","id","href","_c","$RefreshReg$"],"sources":["D:/react/app9-1/local/src/db-delete.js"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React from 'react'\r\nimport './table-style.css'\r\n\r\nexport default function DBUpdate() {\r\n    let [data, setData] = React.useState('')\r\n\tconst form = React.useRef()\r\n\r\n    React.useEffect(() => {\t\r\n\t\tfetch('/api/db/read')\r\n\t\t.then(response => response.json())\r\n\t\t.then(result => {       \r\n            if (result.length > 0) {\r\n                showData(result)\r\n            } else {\r\n                setData(<>ไม่มีรายการข้อมูล</>)\r\n            }   \r\n\t\t})\r\n        .catch(err => alert(err))\r\n    }, [])  \r\n\r\n    const showData = (result) => {\r\n        let r = (\r\n        <form onSubmit={onSubmitForm} ref={form}>\r\n        <table>\r\n        <tr>\r\n            <th>ลบ</th><th class=\"thLeft\">ชื่อสินค้า</th><th>ราคา</th>\r\n            <th>วันที่เพิ่มสินค้า</th><th class=\"thLeft\">รายละเอียด</th>\r\n        </tr>\r\n        {\r\n        result.map(doc => {\r\n            let dt = new Date(Date.parse(doc.date_added))\r\n            let dmy = (\r\n                <>{dt.getDate()}-{dt.getMonth()+1}-{dt.getFullYear()}</>\r\n            )\r\n            let p = new Intl.NumberFormat().format(doc.price)\r\n            return (\r\n            <tr>\r\n                <td class=\"tdCenter\">\r\n                    <input type=\"radio\" name=\"_id\" value={doc._id}/>\r\n                </td>\r\n                <td>{doc.name}</td>\r\n                <td class=\"tdCenter\">{p}</td>\r\n                <td class=\"tdCenter\">{dmy}</td>\r\n                <td>{doc.detail}</td>\r\n            </tr>\r\n            )\r\n        })\r\n        }\r\n        </table>\r\n        <br/>\r\n        <button>ลบรายการที่เลือก</button>\r\n        </form>\r\n        )\r\n    \r\n        setData(r)\r\n    }\r\n\r\n    const onSubmitForm = (event) => {\r\n        event.preventDefault()\r\n\r\n        const fd = new FormData(form.current)\r\n        const fe = Object.fromEntries(fd.entries())\r\n        if (Object.keys(fe).length === 0) {\r\n            alert('ต้องเลือกรายการที่จะลบ')\r\n            return\r\n        }\r\n\r\n        if (!window.confirm('ยืนยันการลบรายการนี้')) {\r\n            return\r\n        }\r\n\r\n        fetch('/api/db/delete', {\r\n            method: 'POST',\r\n            body: JSON.stringify(fe),\r\n            headers: {'Content-Type':'application/json'}\r\n        })\r\n        .then(response => response.json())\r\n        .then(result => {\r\n            if (result.error) {\r\n                alert(result.error)\r\n            } else {\r\n                if (result.length === 0) {\r\n                    setData('ไม่มีรายการข้อมูล')\r\n                } else {\r\n                    showData(result)                  \r\n                }\r\n                alert('ข้อมูลถูกลบแล้ว')   \r\n            }\r\n        })\r\n        .catch(err => alert(err))\r\n    }\r\n\r\n    return (\r\n        <div style={{margin:'20px'}}>\r\n            <div id=\"data\">{data}</div>\r\n            <br/>\r\n            <a href=\"/db\">หน้าหลัก</a>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}